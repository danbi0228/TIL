# 쓰레드(thread)

### 4. 싱글쓰레드와 멀티쓰레드
: 하나의 쓰레드로 두 개의 작업을 수행한 시간과 두개의 쓰레드로 두 개의 작업을 수행한 시간은 거의 같다.
오히려 두 개의 쓰레드로 작업한 시간이 싱글쓰레드로 작업한 시간보다 더 걸리게 되는데
그 이유는 **쓰레드간의 작업 전환(context switching)** 에 시간이 걸리기 때문이다.

작업 전환을 할 때는 현재 진행 중인 작업의 상태, 예를 들면 다음에 실행해야 할 위치(PC, 프로그램 카운터) 등의
정보를 저장하고 읽어오는 시간이 소요된다.
참고로 쓰레드의 스위칭에 비해 프로세스의 스위칭이 더 많은 정보를 저장해야 하므로 더 많은 시간이 소요됨

개서 싱글 코어에서 단순히 CPU만을 사용하는 계산작업이라면
오히려 멀티쓰레드보다 싱글쓰레드로 프로그래밍 하는 것이 더 효율적

<br>

### 5. 쓰레드의 우선순위
: 쓰레드는 우선순위(priority)라는 속성(멤버변수)을 가지고 있는데, 이 우선순위의 값에 따라
쓰레드가 얻는 실행시간이 달라진다.
쓰레드가 수행하는 작업의 중요도에 따라 쓰레드의 우선순위를 서로 다르게 지정하여 특정 쓰레드가
더 많은 작업시간을 갖도록 할 수 있다.

예를 들어, 파일전송기능이 있는 메신저에서 파일다운로드를 처리하는 쓰레드보다
채팅 내용을 전송하는 쓰레드읭 우선순위가 더 높아야 사용자가 채팅하는데 불편함이 없다.
대신 파일다운로드의 작업에 걸리는 시간은 더 길어질 것
<br> → 시각적인 부분이나 사용자에게 빠르게 반응해야하는 작업을 하는 쓰레드의 우선순위는 다른 작업의 쓰레드에 비해 높아야한다.

#### 쓰레드의 우선순위 지정하기

```
void setPriority(int newPriority) : 쓰레드의 우선순위를 지정한 값으로 변경한다.
int getPriority() : 쓰레드의 우선순위를 반환한다.

public static final int MAX_PRIORITY = 10       // 최대 우선순위
public static final int MIN_PRIORITY = 1        // 최소 우선순위
public static final int NORM_PRIORITY = 5       // 보통 우선순위
```

쓰레드가 가질 수 있는 우선순위의 범위는 1~10이며 숫자가 높을수록 우선순위가 높다.

쓰레드의 우선순위는 쓰레드를 생성한 쓰레드로부터 상속받는다.
main메서드를 수행하는 쓰레드는 우선순위가 5이므로 main메서드 내에서 생성하는 쓰레드의 우선순위는
자동적으로 5가 된다.

<br>

### 6. 쓰레드 그룹(thread group)
: 쓰레드 그룹은 서로 관련된 쓰레드를 그룹으로 다루기 위한 것으로
폴더를 생성해서 관련된 파일들을 함께 관리하는 것처럼 쓰레드 그룹을 생성해서 쓰레드를 그룹으로 묶어 관리할 수 있다.

쓰레드 그룹에 다른 쓰레드 그룹을 포함시킬 수 있다. 쓰레드 그룹은 보안상의 이유로 도입된 개념으로
자신이 속한 쓰레드 그룹이나 하위 쓰레드 그룹은 변경할 수 없지만 다른 쓰레드 그룹의 쓰레드를 변경할 수는 없다.
ThreadGroup을 사용해서 생성할 수 있다.

| 생성자 / 메서드                                                                                                                                                                   | 설명                                                                                                                                     |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| ThreadGroup(String name)                                                                                                                                                    | 지정된 이름의 새로운 쓰레드 그룹을 생성                                                                                                                 |
| ThreadGroup(ThreadGroup parent, String name)                                                                                                                                | 지정된 쓰레드 그룹에 포함되는 새로운 쓰레드 그룹을 생성                                                                                                        |
| int activeCount()                                                                                                                                                           | 쓰레드 그룹에 포함된 활성상태에 있는 쓰레드의 수를 반환                                                                                                        |
| int activeGroupCount()                                                                                                                                                      | 쓰레드 그룹에 포함된 활성상태에 있는 쓰레드 그룹의 수를 반환                                                                                                     |
| void checkAccess()                                                                                                                                                          | 현재 실행중인 쓰레드가 쓰레드 그룹을 변경할 권한이 있는지 체크. 만일 권한이 없다면 SecurityException을 발생시킴                                                                |
| void destroy()                                                                                                                                                              | 쓰레드 그룹과 하위 쓰레드 그룹까지 몯 삭제. 단, 쓰레드 그룹이나 하위 쓰레드 그룹이 비어있어야 한다                                                                              |
| int enumerate(Thread[] list)<br/>int enumerate(Thread[] list, boolean recurse)<br/>int enumerate(ThreadGroup[] list)<br/>int enumerate(ThreadGroup[] list, boolean recurse) | 쓰레드 그룹에 속한 쓰레드 또는 하위 쓰레드 그룹의 목록을 지정된 배열에 담고 그 개수를 반환<br/>두 번째 매개변수인 recurse의 값을 true로 하면 쓰레드 그룹에 속한 하위 쓰레드 그룹에 쓰레드 또는 쓰레드 그룹까지 배열에 담는다 |
| int getMaxPriority()                                                                                                                                                        | 쓰레드 그룹의 최대우선순위를 반환                                                                                                                     |
| String getName()                                                                                                                                                            | 쓰레드 그룹의 이름을 반환                                                                                                                         |
| ThreadGroup getParent()                                                                                                                                                     | 쓰레드 그룹의 상위 쓰레드그룹을 반환                                                                                                                   |
| void interrupt()                                                                                                                                                            | 쓰레드 그룹에 속한 모든 쓰레드를 interrupt                                                                                                           |
| boolean isDaemon()                                                                                                                                                          | 쓰레드 그룹이 데몬 쓰레드그룹인지 확인                                                                                                                  |
| boolean isDestroyed()                                                                                                                                                       | 쓰레드 그룹이 삭제되었는지 확인                                                                                                                      |
| void list()                                                                                                                                                                 | 쓰레드 그룹에 속한 쓰레드와 하위 쓰레드그룹에 대한 정보를 출력                                                                                                    |
| boolean parentOf(ThreadGroup g)                                                                                                                                             | 지정된 쓰레드 그룹의 상위 쓰레드그룹인지 확인                                                                                                              |
| void setDaemon(boolean daemon)                                                                                                                                              | 쓰레드 그룹을 데몬 쓰레드그룹으로 설정/해제                                                                                                               |
| void setMaxPriority(int pri)                                                                                                                                                | 쓰레드 그룹의 최대우선순위를 결정                                                                                                                     |


```
ThreadGroup getThreadGroup() : 쓰레드 자신이 속한 쓰레드 그룹을 반환
void uncaughtException(Thread t, Throwable e) : 쓰레드 그룹의 쓰레드가 처리되지 않은 예외에 의해 실행이 종료되었을 때, JVM에 의해 이 메서드가 자동적으로 호출된다.
```